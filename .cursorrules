# cleverprices.com - AI Assistant Rules

You are working on cleverprices.com, a premium price comparison platform focused on "Price per Unit" analysis.

## Core Principles

1.  **Price per Unit First**: All product categories must support meaningful unit price comparison (e.g., $/TB, $/kg, $/count).
2.  **Premium UI (Zinc Aesthetic)**: Use the Zinc/Grey palette. Dark mode by default with glassmorphism, smooth animations, and subtle orange accents.
3.  **SEO & Branding**:
    - Always use `cleverprices.com` for branding (avoid "CleverPrices").
    - Every page must have a unique title, meta description, canonical URL, and Open Graph tags.
    - Title format: `[Page Title] - cleverprices.com`.
4.  **Performance**: Prioritize local assets (e.g., use local SVG flags in `/public/flags/` instead of CDNs).

## Technology Stack

- Next.js 16+ (App Router)
- TypeScript (Strict mode)
- Tailwind CSS
- shadcn/ui (Radix UI)
- Lucide React (Icons)
- nuqs (URL-based state)

## Coding Standards

### Components & Styling

- Use functional components with explicit TypeScript interfaces for props.
- **Links**: No underline by default, underline **ONLY on hover**. Do not change color on hover.
- **Tables**: Use `HeroTableDemo` patterns. Round "Price per Unit" to **two decimal places**.
- **Responsive**: Mobile-first. Hide non-critical columns in tables on small screens. Use Sheet for mobile filters.

### Data & Logic

- **Country Filtering**: Products must be filtered by `countryCode`. Only show products available in the active marketplace.
- **Affiliate Disclosures**: Ensure footer contains visible affiliate disclosures.
- **Local Assets**: Reference flags using `getFlagUrl(countryCode)` which points to `/public/flags/[code].svg`.

## Content & Blog Guidelines

- **SEO Strategy**: Blog posts should target real search intent and build topical relevance.
- **Internal Linking**: Blog posts must link to "money pages" (category/product listings).
- **Tone**: Professional, data-driven, and helpful.

## File Structure

- Pages: `src/app/[country]/...`
- Components: `src/components/` (UI components in `src/components/ui/`)
- Hooks: `src/hooks/` (e.g., `useCountry`, `useProductFilters`)
- Lib: `src/lib/` (e.g., `metadata.ts`, `amazon-api.ts`)
- Assets: `public/flags/` for country flags.

## Common Tasks

### Adding a Category

1. Define in `src/lib/categories.ts`.
2. Add to `src/app/[country]/page.tsx` and `src/app/[country]/categories/page.tsx`.
3. Ensure unit price logic (e.g., `pricePerTB`) is correctly implemented in `amazon-api.ts` and listing components.

### SEO Updates

- Update `src/lib/metadata.ts` for global defaults.
- Ensure `metadata` or `generateMetadata` in `page.tsx` includes `canonical` and `openGraph`.

## UI Patterns

- **Filters**: Accordion for desktop sidebar, Sheet for mobile.
- **Modals**: Use search modals with high z-index (layered above banners).
- **Badges**: Use "Best" instead of "TOP" for premium-rated products.

## Performance & Optimization

- `next/image` for all images.
- `useMemo` for heavy filtering/sorting of product lists.
- Avoid external CDNs for small assets like icons or flags.

Refer to `PROJECT_CONTEXT.md` for detailed architecture and project history.
